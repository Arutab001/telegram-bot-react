import React, {useState} from 'react';
import classes from "./TaskError.module.css";
import {useLangProfile} from "../Base_Logic/UserLanguageProvider.js";
import {useUser} from "../Base_Logic/UserContext.js";

const translations = {
    english: {
        Warning: "Task Warning",
        Text: "You did not meet the task requirements",
    },
    russian: {
        Warning: "Предупреждение о задании",
        Text: "Вы не выполнили требования задания",
    },
    german: {
        Warning: "Aufgabenwarnung",
        Text: "Sie haben die Aufgabenanforderungen nicht erfüllt",
    },
    turkish: {
        Warning: "Görev Uyarısı",
        Text: "Görev gereksinimlerini karşılamadınız",
    },
};


const TaskError = ({show, close}) => {

    const {user} = useUser();
    if (!show) return null;

    const { userLanguage } = useLangProfile(); // Получаем текущий язык пользователя
    const [localisation, setLocalisation] = useState(
        translations[userLanguage] || translations[user.language] || translations.english
    );

    return (
        <div className={classes.task_error_overlay}>
            <div style={{position: "absolute", zIndex: "-1", left: "-15vw", top: "22vh"}}>
                <svg xmlns="http://www.w3.org/2000/svg" width="475" height="394" viewBox="0 0 925 594" fill="none">
                    <g filter="url(#filter0_d_501_1633)">
                        <path
                            d="M772.879 83.1173C777.847 80.5752 782.991 79.2856 782.991 79.2856C792.094 77.0035 799.438 78.1236 801.485 78.4793C806.668 79.3798 812.106 80.3243 817.141 84.6486C824.63 91.0809 825.722 100.263 826.069 103.174C826.465 106.509 826.862 114.348 822.326 122.429C818.053 130.043 811.811 133.579 809.576 134.806C801.881 139.034 793.967 139.298 788.697 139.475C782.971 139.667 782.567 138.849 778.355 139.568C771.692 140.705 767.088 143.712 763.387 146.129C759.405 148.729 757.393 150.084 756.345 152.778C755.237 155.622 755.431 159.124 757.001 161.826C758.83 164.971 761.943 166.03 767.543 167.842C774.355 170.044 775.838 169.095 781.437 171.134C785.035 172.445 788.64 173.758 791.638 176.838C796.581 181.915 798.012 189.876 796.674 196.206C794.413 206.901 784.377 212.304 779.806 214.764C766.227 222.074 758.768 217.277 748.162 221.782C740.59 225 730.813 233.214 724.284 256.723C697.011 231.489 692.789 206.139 691.846 197.596C691.846 197.596 685.993 127.58 772.879 83.1183L772.879 83.1173Z"
                            fill="url(#paint0_linear_501_1633)"/>
                    </g>
                    <g filter="url(#filter1_d_501_1633)">
                        <path
                            d="M168.582 227.638C167.62 226.028 165.93 223.636 163.175 221.452C162.467 220.89 158.752 218.015 153.173 216.904C151.388 216.549 145.96 215.687 136.474 219.257C129.894 221.733 128.753 223.56 117.724 230.267C108.196 236.062 103.339 238.977 98.7789 239.886C88.7634 241.881 80.4089 238.61 77.5645 237.344C69.2491 233.645 64.7291 227.83 62.4781 224.862C53.6296 213.19 53.3684 200.501 53.3403 196.083C53.3109 191.512 53.3534 183.345 57.9912 174.579C63.3043 164.536 71.4637 159.726 77.6763 156.063C89.9865 148.805 101.31 147.694 104.567 147.451C111.122 146.962 119.36 146.349 127.966 150.394C138.091 155.152 137.335 161.007 151.713 171.015C157.779 175.239 161.649 177.932 167.784 179.387C175.342 181.18 176.141 178.675 190.277 179.905C196.178 180.419 198.774 181.093 201.685 179.291C205.304 177.051 207.834 171.958 206.745 167.799C205.974 164.852 201.725 162.408 193.261 157.643C181.546 151.047 181.823 151.267 180.167 150.27C170.985 144.747 166.394 141.985 162.363 136.611C159.547 132.859 154.377 125.969 156.335 117.889C158.273 109.894 165.912 106.014 167.479 105.256C210.449 85.8223 253.42 66.3885 296.39 46.9555C314.459 70.5999 332.527 94.2443 350.595 117.888C299.153 155.865 247.711 193.842 196.268 231.82C187.039 230.425 177.809 229.031 168.58 227.637L168.582 227.638Z"
                            fill="url(#paint1_linear_501_1633)"/>
                    </g>
                    <g filter="url(#filter2_d_501_1633)">
                        <path
                            d="M229.667 305.128C229.274 305.708 228.737 306.577 228.238 307.692C228.238 307.692 226.588 311.376 226.794 316.359C226.987 321.058 230.699 330.013 238.686 339.365C238.683 341.236 238.679 343.105 238.677 344.975C237.032 345.478 234.707 346.064 231.875 346.372C229.441 346.637 224.212 347.158 218.601 345.39C211.847 343.262 207.874 338.868 204.944 335.628C199.656 329.779 197.116 323.661 196.047 320.647C193.122 312.405 194.75 309.249 191.03 303.743C188.627 300.185 185.789 298.309 182.719 296.324C172.151 289.49 161.188 288.983 157.073 288.843C151.713 288.66 142.065 288.449 132.052 293.966C128.711 295.806 123.5 298.677 119.749 304.703C114.759 312.719 115.621 321.062 116.122 325.914C117.634 340.551 126.282 349.952 128.943 352.764C133.056 357.108 138.39 362.743 146.65 364.382C149.017 364.851 153.52 365.018 162.528 365.351C168.486 365.572 170.334 365.496 173.401 366.421C176.043 367.217 180.727 368.63 184.134 373.07C184.998 374.196 189.232 380.018 187.293 386.911C185.772 392.315 181.37 395.126 179.832 396.109C176.974 397.933 175.666 397.663 171.815 399.156C169.112 400.204 163.032 402.561 158.963 407.623C153.31 414.656 154.289 423.494 154.492 425.341C154.742 427.6 155.545 434.022 160.72 439.549C166.829 446.075 174.807 446.838 177.631 447.109C186.795 447.985 194.086 444.245 196.367 442.95C200.063 440.852 200.719 439.437 205.728 436.99C210.703 434.56 214.826 433.624 216.384 433.305C220.887 432.383 224.398 431.665 228.721 432.727C230.176 433.084 236.15 434.551 240.016 440.165C244.634 446.868 242.722 454.374 242.141 456.659C241.617 458.717 240.212 464.234 235.412 467.343C233.798 468.388 232.498 468.711 230.126 469.361C223.597 471.15 218.504 472.545 215.206 473.891C213.081 474.759 203.784 478.552 200.066 487.533C198.571 491.143 198.438 494.479 198.53 496.593C226.876 489.558 255.221 482.523 283.565 475.487C267.235 417.937 250.904 360.387 234.575 302.836C232.939 303.601 231.303 304.367 229.667 305.132L229.667 305.128Z"
                            fill="url(#paint2_linear_501_1633)"/>
                        <path
                            d="M229.667 305.128C229.274 305.708 228.737 306.577 228.238 307.692C228.238 307.692 226.588 311.376 226.794 316.359C226.987 321.058 230.699 330.013 238.686 339.365C238.683 341.236 238.679 343.105 238.677 344.975C237.032 345.478 234.707 346.064 231.875 346.372C229.441 346.637 224.212 347.158 218.601 345.39C211.847 343.262 207.874 338.868 204.944 335.628C199.656 329.779 197.116 323.661 196.047 320.647C193.122 312.405 194.75 309.249 191.03 303.743C188.627 300.185 185.789 298.309 182.719 296.324C172.151 289.49 161.188 288.983 157.073 288.843C151.713 288.66 142.065 288.449 132.052 293.966C128.711 295.806 123.5 298.677 119.749 304.703C114.759 312.719 115.621 321.062 116.122 325.914C117.634 340.551 126.282 349.952 128.943 352.764C133.056 357.108 138.39 362.743 146.65 364.382C149.017 364.851 153.52 365.018 162.528 365.351C168.486 365.572 170.334 365.496 173.401 366.421C176.043 367.217 180.727 368.63 184.134 373.07C184.998 374.196 189.232 380.018 187.293 386.911C185.772 392.315 181.37 395.126 179.832 396.109C176.974 397.933 175.666 397.663 171.815 399.156C169.112 400.204 163.032 402.561 158.963 407.623C153.31 414.656 154.289 423.494 154.492 425.341C154.742 427.6 155.545 434.022 160.72 439.549C166.829 446.075 174.807 446.838 177.631 447.109C186.795 447.985 194.086 444.245 196.367 442.95C200.063 440.852 200.719 439.437 205.728 436.99C210.703 434.56 214.826 433.624 216.384 433.305C220.887 432.383 224.398 431.665 228.721 432.727C230.176 433.084 236.15 434.551 240.016 440.165C244.634 446.868 242.722 454.374 242.141 456.659C241.617 458.717 240.212 464.234 235.412 467.343C233.798 468.388 232.498 468.711 230.126 469.361C223.597 471.15 218.504 472.545 215.206 473.891C213.081 474.759 203.784 478.552 200.066 487.533C198.571 491.143 198.438 494.479 198.53 496.593C226.876 489.558 255.221 482.523 283.565 475.487C267.235 417.937 250.904 360.387 234.575 302.836C232.939 303.601 231.303 304.367 229.667 305.132L229.667 305.128Z"
                            fill="url(#paint3_linear_501_1633)" fill-opacity="0.2"/>
                    </g>
                    <g filter="url(#filter3_d_501_1633)">
                        <path
                            d="M656.097 496.028C656.868 490.38 657.853 485.672 658.722 482.079C659.681 478.115 660.489 475.559 662.805 474.227C663.038 474.094 665.11 472.943 667.49 473.546C669.83 474.141 671.161 476.101 671.773 476.98C674.517 480.916 678.23 484.102 681.034 487.994C683.46 491.363 687.258 495.059 694.853 502.451C701.511 508.932 704.908 512.207 708.217 513.868C711.012 515.271 717.242 518.293 725.398 517.149C727.413 516.866 735.394 515.509 741.574 508.57C743.296 506.635 747.298 502.143 747.745 495.28C748.165 488.825 745.196 484.05 744.033 482.235C739.218 474.728 731.471 471.939 723.585 469.223C716.128 466.655 711.833 466.376 704.784 465.067C697.426 463.7 686.932 461.187 674.334 456.148C675.435 453.686 677.022 450.22 679.033 446.115C682.586 438.86 685.498 433.614 688.938 427.438C692.039 421.869 694.254 417.909 697.627 412.576C699.472 409.66 701.076 407.261 702.233 405.566C703.328 407.05 704.977 409.295 706.971 412.039C712.139 419.15 712.88 420.337 714.863 423.011C717.667 426.796 721.653 432.174 727.569 437.984C731.839 442.179 734.862 445.15 739.879 447.992C743.724 450.172 748.693 452.913 755.631 453.156C758.282 453.249 763.789 453.368 769.445 450.006C771.05 449.052 774.828 446.74 777.373 441.998C777.774 441.251 781.478 434.081 778.688 426.082C777.173 421.737 774.449 419.177 771.311 416.226C769.811 414.815 766.732 412.154 762.179 409.892C760.841 409.228 757.356 407.593 746.401 405.553C737.739 403.94 738.76 404.747 733.296 403.498C722.996 401.143 717.752 397.908 716.217 396.918C713.601 395.233 711.627 393.547 710.324 392.335C712.024 388.772 714.831 383.362 719.021 377.197C721.069 374.184 722.936 371.744 731.016 361.887C734.063 358.168 738.13 353.23 742.985 347.401C744.239 348.948 746.06 351.191 748.272 353.891C752.838 359.468 755.159 362.298 757.003 364.339C757.983 365.425 761.301 369.062 766.05 373.422C771.214 378.163 773.796 380.535 777.289 382.573C784.209 386.609 790.566 387.521 791.945 387.702C795.538 388.173 802.889 389.136 810.675 385.255C813.552 383.82 819.074 381.068 821.977 374.599C822.435 373.58 825.832 365.657 821.681 357.533C817.375 349.106 807.635 347.433 804.181 346.814C803.586 346.708 801.678 346.585 797.886 346.345C784.282 345.482 783.764 345.567 779.54 345.228C764.798 344.046 761.219 342.219 759.634 341.312C756.322 339.417 754.045 337.151 752.678 335.595C755.588 331.088 758.231 327.538 760.135 325.096C768 315.015 775.253 305.929 786.644 301.705C787.56 301.366 789.561 300.817 793.564 299.719C804.664 296.672 808.407 295.889 812.272 294.656C819.545 292.336 826.038 288.568 834.396 280.587C837.451 277.67 844.58 269.512 850.823 257.744C855.409 249.101 855.621 245.113 855.41 242.48C855.3 241.109 854.598 234.171 849.231 229.359C841.676 222.585 830.524 225.085 825.737 226.158C813.886 228.815 806.343 236.357 800.271 242.429C793.657 249.042 789.409 255.593 787.12 259.629C783.748 265.578 781.548 271.293 779.46 276.724C775.93 285.9 776.266 287.203 773.777 291.954C771.557 296.191 769.142 299.255 762.639 306.191C757.682 311.476 751.057 318.259 742.826 325.937C741.771 323.923 740.361 320.885 739.26 317.023C737.656 311.395 737.636 306.759 737.662 297.716C737.713 279.807 737.748 277.911 737.021 274.037C735.782 267.429 734.96 263.044 731.168 259.276C726.711 254.849 719.196 252.31 712.384 254.57C704.612 257.147 701.498 264.727 700.174 267.948C695.226 279.993 699.391 291.919 702.213 299.648C709.389 319.296 723.274 331.512 731.764 337.699C729.416 340.717 726.391 344.639 722.902 349.255C720.157 352.888 716.39 357.879 711.738 364.316C708.29 369.089 703.982 375.172 699.111 382.358C698.04 381.002 696.553 378.924 695.186 376.185C691.919 369.639 692.031 364.731 691.155 355.703C690.03 344.122 689.468 338.332 686.685 331.63C685.028 327.639 683.121 323.046 678.571 319C677.881 318.387 667.233 309.166 657.372 312.568C646.943 316.165 643.145 331.889 644.919 342.72C646.565 352.769 653.211 359.833 662.998 370.238C667.087 374.585 668.79 375.657 676.842 383.871C682.439 389.581 686.886 394.438 689.855 397.753C687.539 400.345 684.676 405.443 681.313 411.247C676.817 419.004 675.495 422.519 670.988 431.283C667.826 437.432 666.058 439.386 661.75 446.129C657.616 452.599 651.941 462.23 646.043 475.079C649.393 482.06 652.744 489.041 656.095 496.023L656.097 496.028Z"
                            fill="url(#paint4_linear_501_1633)"/>
                    </g>
                    <defs>
                        <filter id="filter0_d_501_1633" x="638.664" y="31.7906" width="256.729" height="301.032"
                                filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                            <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                            <feColorMatrix in="SourceAlpha" type="matrix"
                                           values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                                           result="hardAlpha"/>
                            <feOffset dx="8" dy="15"/>
                            <feGaussianBlur stdDeviation="30.55"/>
                            <feComposite in2="hardAlpha" operator="out"/>
                            <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.35 0"/>
                            <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_501_1633"/>
                            <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_501_1633" result="shape"/>
                        </filter>
                        <filter id="filter1_d_501_1633" x="0.235939" y="0.85508" width="419.46" height="315.761"
                                filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                            <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                            <feColorMatrix in="SourceAlpha" type="matrix"
                                           values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                                           result="hardAlpha"/>
                            <feOffset dx="8" dy="15"/>
                            <feGaussianBlur stdDeviation="30.55"/>
                            <feComposite in2="hardAlpha" operator="out"/>
                            <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.35 0"/>
                            <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_501_1633"/>
                            <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_501_1633" result="shape"/>
                        </filter>
                        <filter id="filter2_d_501_1633" x="62.6305" y="242.675" width="290.034" height="330.018"
                                filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                            <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                            <feColorMatrix in="SourceAlpha" type="matrix"
                                           values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                                           result="hardAlpha"/>
                            <feOffset dx="8" dy="15"/>
                            <feGaussianBlur stdDeviation="30.55"/>
                            <feComposite in2="hardAlpha" operator="out"/>
                            <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.35 0"/>
                            <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_501_1633"/>
                            <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_501_1633" result="shape"/>
                        </filter>
                        <filter id="filter3_d_501_1633" x="591.4" y="178.711" width="333.163" height="414.792"
                                filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                            <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                            <feColorMatrix in="SourceAlpha" type="matrix"
                                           values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                                           result="hardAlpha"/>
                            <feOffset dx="8" dy="15"/>
                            <feGaussianBlur stdDeviation="30.55"/>
                            <feComposite in2="hardAlpha" operator="out"/>
                            <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.35 0"/>
                            <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_501_1633"/>
                            <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_501_1633" result="shape"/>
                        </filter>
                        <linearGradient id="paint0_linear_501_1633" x1="830.185" y1="97.8064" x2="791.511" y2="252.533"
                                        gradientUnits="userSpaceOnUse">
                            <stop stop-color="#4CAF50"/>
                            <stop offset="1" stop-color="#212121"/>
                        </linearGradient>
                        <linearGradient id="paint1_linear_501_1633" x1="13.0895" y1="302.725" x2="119.58" y2="397.101"
                                        gradientUnits="userSpaceOnUse">
                            <stop stop-color="#4CAF50"/>
                            <stop offset="0.684818" stop-color="#212121"/>
                        </linearGradient>
                        <linearGradient id="paint2_linear_501_1633" x1="278.271" y1="453.585" x2="168.918" y2="239.591"
                                        gradientUnits="userSpaceOnUse">
                            <stop stop-color="#4CAF50"/>
                            <stop offset="1" stop-color="#FFEB3B"/>
                        </linearGradient>
                        <linearGradient id="paint3_linear_501_1633" x1="221.826" y1="365.574" x2="165.388" y2="437.879"
                                        gradientUnits="userSpaceOnUse">
                            <stop stop-opacity="0"/>
                            <stop offset="0.25" stop-opacity="0.75"/>
                        </linearGradient>
                        <linearGradient id="paint4_linear_501_1633" x1="665.406" y1="473.262" x2="822.614" y2="214.259"
                                        gradientUnits="userSpaceOnUse">
                            <stop stop-color="#4CAF50"/>
                            <stop offset="1" stop-color="#FFEB3B"/>
                        </linearGradient>
                    </defs>
                </svg>
            </div>
            <div className={classes.task_error_content}>
                <div>
                    <h2 className={classes.error_header}>
                        {localisation.Warning}
                    </h2>
                    <div>
                        <p>
                            {localisation.Text}
                        </p>
                        <button onClick={close}>
                            <p className="InlineErrorBtn">OK</p>OK
                        </button>
                    </div>
                </div>
            </div>
        </div>
    );
};

export default TaskError;